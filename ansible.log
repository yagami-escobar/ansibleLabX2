2025-07-24 22:40:04,455 p=5103 u=ansible n=ansible | ERROR! Empty playbook, nothing to do
2025-07-24 22:41:52,294 p=5114 u=ansible n=ansible | playbook: playbooks/install-nginx.yml
2025-07-24 22:42:19,666 p=5118 u=ansible n=ansible |  [ERROR]: User interrupted execution

2025-07-24 22:43:26,368 p=5168 u=ansible n=ansible | [WARNING]: Unhandled error in Python interpreter discovery for host web2: Failed to connect to the host via ssh: Warning: Permanently added
'192.168.56.12' (ED25519) to the list of known hosts.  ubuntu@192.168.56.12: Permission denied (publickey,password).

2025-07-24 22:43:26,372 p=5166 u=ansible n=ansible | [WARNING]: Unhandled error in Python interpreter discovery for host web1: Failed to connect to the host via ssh: Warning: Permanently added
'192.168.56.11' (ED25519) to the list of known hosts.  ubuntu@192.168.56.11: Permission denied (publickey,password).

2025-07-24 22:43:26,587 p=5164 u=ansible n=ansible | web2 | UNREACHABLE! => {
    "changed": false,
    "msg": "Data could not be sent to remote host \"192.168.56.12\". Make sure this host can be reached over ssh: ubuntu@192.168.56.12: Permission denied (publickey,password).\r\n",
    "unreachable": true
}
2025-07-24 22:43:26,589 p=5164 u=ansible n=ansible | web1 | UNREACHABLE! => {
    "changed": false,
    "msg": "Data could not be sent to remote host \"192.168.56.11\". Make sure this host can be reached over ssh: ubuntu@192.168.56.11: Permission denied (publickey,password).\r\n",
    "unreachable": true
}
2025-07-24 22:43:38,863 p=5179 u=ansible n=ansible | [WARNING]: Unhandled error in Python interpreter discovery for host web1: Failed to connect to the host via ssh: ubuntu@192.168.56.11: Permission denied
(publickey,password).

2025-07-24 22:43:38,868 p=5181 u=ansible n=ansible | [WARNING]: Unhandled error in Python interpreter discovery for host web2: Failed to connect to the host via ssh: ubuntu@192.168.56.12: Permission denied
(publickey,password).

2025-07-24 22:43:39,068 p=5177 u=ansible n=ansible | web1 | UNREACHABLE! => {
    "changed": false,
    "msg": "Data could not be sent to remote host \"192.168.56.11\". Make sure this host can be reached over ssh: ubuntu@192.168.56.11: Permission denied (publickey,password).\r\n",
    "unreachable": true
}
2025-07-24 22:43:39,076 p=5177 u=ansible n=ansible | web2 | UNREACHABLE! => {
    "changed": false,
    "msg": "Data could not be sent to remote host \"192.168.56.12\". Make sure this host can be reached over ssh: ubuntu@192.168.56.12: Permission denied (publickey,password).\r\n",
    "unreachable": true
}
2025-07-24 22:43:46,418 p=5195 u=ansible n=ansible | [WARNING]: Unhandled error in Python interpreter discovery for host web2: Failed to connect to the host via ssh: ubuntu@192.168.56.12: Permission denied
(publickey,password).

2025-07-24 22:43:46,420 p=5193 u=ansible n=ansible | [WARNING]: Unhandled error in Python interpreter discovery for host web1: Failed to connect to the host via ssh: ubuntu@192.168.56.11: Permission denied
(publickey,password).

2025-07-24 22:43:46,614 p=5191 u=ansible n=ansible | web1 | UNREACHABLE! => {
    "changed": false,
    "msg": "Data could not be sent to remote host \"192.168.56.11\". Make sure this host can be reached over ssh: ubuntu@192.168.56.11: Permission denied (publickey,password).\r\n",
    "unreachable": true
}
2025-07-24 22:43:46,615 p=5191 u=ansible n=ansible | web2 | UNREACHABLE! => {
    "changed": false,
    "msg": "Data could not be sent to remote host \"192.168.56.12\". Make sure this host can be reached over ssh: ubuntu@192.168.56.12: Permission denied (publickey,password).\r\n",
    "unreachable": true
}
2025-07-24 22:44:22,272 p=5210 u=ansible n=ansible | [WARNING]: Unhandled error in Python interpreter discovery for host web1: Failed to connect to the host via ssh: ubuntu@192.168.56.11: Permission denied
(publickey,password).

2025-07-24 22:44:22,277 p=5212 u=ansible n=ansible | [WARNING]: Unhandled error in Python interpreter discovery for host web2: Failed to connect to the host via ssh: ubuntu@192.168.56.12: Permission denied
(publickey,password).

2025-07-24 22:44:22,476 p=5208 u=ansible n=ansible | web1 | UNREACHABLE! => {
    "changed": false,
    "msg": "Data could not be sent to remote host \"192.168.56.11\". Make sure this host can be reached over ssh: ubuntu@192.168.56.11: Permission denied (publickey,password).\r\n",
    "unreachable": true
}
2025-07-24 22:44:22,477 p=5208 u=ansible n=ansible | web2 | UNREACHABLE! => {
    "changed": false,
    "msg": "Data could not be sent to remote host \"192.168.56.12\". Make sure this host can be reached over ssh: ubuntu@192.168.56.12: Permission denied (publickey,password).\r\n",
    "unreachable": true
}
2025-07-24 22:45:03,215 p=5242 u=ansible n=ansible | [WARNING]: Unhandled error in Python interpreter discovery for host web1: Failed to connect to the host via ssh: ubuntu@192.168.56.11: Permission denied
(publickey,password).

2025-07-24 22:45:03,234 p=5244 u=ansible n=ansible | [WARNING]: Unhandled error in Python interpreter discovery for host web2: Failed to connect to the host via ssh: ubuntu@192.168.56.12: Permission denied
(publickey,password).

2025-07-24 22:45:03,407 p=5240 u=ansible n=ansible | web1 | UNREACHABLE! => {
    "changed": false,
    "msg": "Data could not be sent to remote host \"192.168.56.11\". Make sure this host can be reached over ssh: ubuntu@192.168.56.11: Permission denied (publickey,password).\r\n",
    "unreachable": true
}
2025-07-24 22:45:03,447 p=5240 u=ansible n=ansible | web2 | UNREACHABLE! => {
    "changed": false,
    "msg": "Data could not be sent to remote host \"192.168.56.12\". Make sure this host can be reached over ssh: ubuntu@192.168.56.12: Permission denied (publickey,password).\r\n",
    "unreachable": true
}
2025-07-24 22:48:33,202 p=5330 u=ansible n=ansible | playbook: playbooks/install-nginx.yml
2025-07-24 22:48:42,864 p=5334 u=ansible n=ansible | web2 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-07-24 22:48:42,919 p=5334 u=ansible n=ansible | web1 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-07-24 22:49:03,616 p=5355 u=ansible n=ansible | {
    "_meta": {
        "hostvars": {
            "web1": {
                "admin_email": "admin@empresa.com",
                "admin_users": [
                    {
                        "comment": "Usuario DevOps",
                        "groups": "sudo",
                        "name": "devops",
                        "shell": "/bin/bash"
                    }
                ],
                "ansible_host": "192.168.56.11",
                "ansible_user": "ansible",
                "company_name": "SFI Networks",
                "deployment_date": "{{ ansible_date_time.date }}",
                "document_root": "/var/www/html",
                "environment_name": "laboratorio",
                "firewall_enabled": true,
                "http_port": 80,
                "https_port": 443,
                "log_retention_days": 30,
                "nginx_access_log": "/var/log/nginx/access.log",
                "nginx_client_max_body_size": "10M",
                "nginx_error_log": "/var/log/nginx/error.log",
                "nginx_keepalive_timeout": 65,
                "nginx_log_level": "warn",
                "nginx_service_enabled": true,
                "nginx_service_state": "started",
                "nginx_user": "www-data",
                "nginx_version": "latest",
                "nginx_worker_connections": 1024,
                "nginx_worker_processes": 2,
                "ntp_enabled": true,
                "ntp_timezone": "{{ timezone }}",
                "server_id": 1,
                "ssh_port": 22,
                "ssl_certificate_key_path": "/etc/ssl/private/nginx.key",
                "ssl_certificate_path": "/etc/ssl/certs/nginx.crt",
                "ssl_enabled": false,
                "system_packages": [
                    "curl",
                    "wget",
                    "unzip",
                    "vim",
                    "htop",
                    "tree"
                ],
                "timezone": "America/Lima",
                "virtual_hosts": [
                    {
                        "document_root": "{{ document_root }}",
                        "index_files": "index.html index.htm",
                        "name": "default",
                        "server_name": "{{ ansible_default_ipv4.address }}"
                    },
                    {
                        "document_root": "/var/www/empresa",
                        "index_files": "index.html",
                        "name": "empresa",
                        "server_name": "empresa.local"
                    }
                ],
                "website_title": "Servidor Nginx - {{ environment_name }}"
            },
            "web2": {
                "admin_email": "admin@empresa.com",
                "admin_users": [
                    {
                        "comment": "Usuario DevOps",
                        "groups": "sudo",
                        "name": "devops",
                        "shell": "/bin/bash"
                    }
                ],
                "ansible_host": "192.168.56.12",
                "ansible_user": "ansible",
                "company_name": "SFI Networks",
                "deployment_date": "{{ ansible_date_time.date }}",
                "document_root": "/var/www/html",
                "environment_name": "laboratorio",
                "firewall_enabled": true,
                "http_port": 80,
                "https_port": 443,
                "log_retention_days": 30,
                "nginx_access_log": "/var/log/nginx/access.log",
                "nginx_client_max_body_size": "10M",
                "nginx_error_log": "/var/log/nginx/error.log",
                "nginx_keepalive_timeout": 65,
                "nginx_log_level": "warn",
                "nginx_service_enabled": true,
                "nginx_service_state": "started",
                "nginx_user": "www-data",
                "nginx_version": "latest",
                "nginx_worker_connections": 1024,
                "nginx_worker_processes": 4,
                "ntp_enabled": true,
                "ntp_timezone": "{{ timezone }}",
                "server_id": 2,
                "ssh_port": 22,
                "ssl_certificate_key_path": "/etc/ssl/private/nginx.key",
                "ssl_certificate_path": "/etc/ssl/certs/nginx.crt",
                "ssl_enabled": false,
                "system_packages": [
                    "curl",
                    "wget",
                    "unzip",
                    "vim",
                    "htop",
                    "tree"
                ],
                "timezone": "America/Lima",
                "virtual_hosts": [
                    {
                        "document_root": "{{ document_root }}",
                        "index_files": "index.html index.htm",
                        "name": "default",
                        "server_name": "{{ ansible_default_ipv4.address }}"
                    },
                    {
                        "document_root": "/var/www/empresa",
                        "index_files": "index.html",
                        "name": "empresa",
                        "server_name": "empresa.local"
                    }
                ],
                "website_title": "Servidor Nginx - {{ environment_name }}"
            }
        }
    },
    "all": {
        "children": [
            "testing",
            "ungrouped",
            "webservers"
        ]
    },
    "testing": {
        "hosts": [
            "web1"
        ]
    },
    "webservers": {
        "hosts": [
            "web1",
            "web2"
        ]
    }
}
2025-07-24 22:49:18,667 p=5356 u=ansible n=ansible | {
    "admin_email": "admin@empresa.com",
    "admin_users": [
        {
            "comment": "Usuario DevOps",
            "groups": "sudo",
            "name": "devops",
            "shell": "/bin/bash"
        }
    ],
    "ansible_host": "192.168.56.11",
    "ansible_user": "ansible",
    "company_name": "SFI Networks",
    "deployment_date": "{{ ansible_date_time.date }}",
    "document_root": "/var/www/html",
    "environment_name": "laboratorio",
    "firewall_enabled": true,
    "http_port": 80,
    "https_port": 443,
    "log_retention_days": 30,
    "nginx_access_log": "/var/log/nginx/access.log",
    "nginx_client_max_body_size": "10M",
    "nginx_error_log": "/var/log/nginx/error.log",
    "nginx_keepalive_timeout": 65,
    "nginx_log_level": "warn",
    "nginx_service_enabled": true,
    "nginx_service_state": "started",
    "nginx_user": "www-data",
    "nginx_version": "latest",
    "nginx_worker_connections": 1024,
    "nginx_worker_processes": 2,
    "ntp_enabled": true,
    "ntp_timezone": "{{ timezone }}",
    "server_id": 1,
    "ssh_port": 22,
    "ssl_certificate_key_path": "/etc/ssl/private/nginx.key",
    "ssl_certificate_path": "/etc/ssl/certs/nginx.crt",
    "ssl_enabled": false,
    "system_packages": [
        "curl",
        "wget",
        "unzip",
        "vim",
        "htop",
        "tree"
    ],
    "timezone": "America/Lima",
    "virtual_hosts": [
        {
            "document_root": "{{ document_root }}",
            "index_files": "index.html index.htm",
            "name": "default",
            "server_name": "{{ ansible_default_ipv4.address }}"
        },
        {
            "document_root": "/var/www/empresa",
            "index_files": "index.html",
            "name": "empresa",
            "server_name": "empresa.local"
        }
    ],
    "website_title": "Servidor Nginx - {{ environment_name }}"
}
2025-07-24 22:49:43,434 p=5360 u=ansible n=ansible | PLAY [INSTALACIÃ“N: Nginx y dependencias del sistema] **************************************************************
2025-07-24 22:49:43,458 p=5360 u=ansible n=ansible | TASK [Gathering Facts] ********************************************************************************************
2025-07-24 22:49:47,888 p=5360 u=ansible n=ansible | ok: [web1]
2025-07-24 22:49:48,020 p=5360 u=ansible n=ansible | ok: [web2]
2025-07-24 22:49:48,037 p=5360 u=ansible n=ansible | TASK [Reporte: Mostrar resumen final] *****************************************************************************
2025-07-24 22:49:48,178 p=5360 u=ansible n=ansible | ok: [web1] => {
    "msg": "=====================================\nLABORATORIO COMPLETADO\n=====================================\nInstalaciÃ³n: EXITOSA\nConfiguraciÃ³n: EXITOSA  \nVerificaciÃ³n: EXITOSA\n\nServidores configurados: 2\nURLs disponibles:\n- http://10.0.2.15\n- http://10.0.2.15\n\nPrÃ³ximos pasos:\n1. Acceder a las URLs para verificar\n2. Revisar logs en /var/log/nginx/\n3. Experimentar con configuraciones\n=====================================\n"
}
2025-07-24 22:49:48,207 p=5360 u=ansible n=ansible | ok: [web2] => {
    "msg": "=====================================\nLABORATORIO COMPLETADO\n=====================================\nInstalaciÃ³n: EXITOSA\nConfiguraciÃ³n: EXITOSA  \nVerificaciÃ³n: EXITOSA\n\nServidores configurados: 2\nURLs disponibles:\n- http://10.0.2.15\n- http://10.0.2.15\n\nPrÃ³ximos pasos:\n1. Acceder a las URLs para verificar\n2. Revisar logs en /var/log/nginx/\n3. Experimentar con configuraciones\n=====================================\n"
}
2025-07-24 22:49:48,295 p=5360 u=ansible n=ansible | PLAY RECAP ********************************************************************************************************
2025-07-24 22:49:48,298 p=5360 u=ansible n=ansible | web1                       : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-07-24 22:49:48,298 p=5360 u=ansible n=ansible | web2                       : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-07-24 22:50:35,544 p=5388 u=ansible n=ansible | ERROR! Empty playbook, nothing to do
2025-07-26 16:23:02,715 p=6142 u=ansible n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'ansible.module_utils.six.moves'
2025-07-26 16:23:02,720 p=6142 u=ansible n=ansible | web1 | FAILED! => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "module_stderr": "Traceback (most recent call last):\n  File \"<stdin>\", line 102, in <module>\n  File \"<stdin>\", line 94, in _ansiballz_main\n  File \"<stdin>\", line 37, in invoke_module\n  File \"/tmp/ansible_ping_payload_hb5vx6c3/ansible_ping_payload.zip/ansible/module_utils/basic.py\", line 176, in <module>\nModuleNotFoundError: No module named 'ansible.module_utils.six.moves'\n",
    "module_stdout": "",
    "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error",
    "rc": 1
}
2025-07-26 16:23:03,084 p=6142 u=ansible n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'ansible.module_utils.six.moves'
2025-07-26 16:23:03,084 p=6142 u=ansible n=ansible | web2 | FAILED! => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "module_stderr": "Traceback (most recent call last):\n  File \"<stdin>\", line 102, in <module>\n  File \"<stdin>\", line 94, in _ansiballz_main\n  File \"<stdin>\", line 37, in invoke_module\n  File \"/tmp/ansible_ping_payload_7632o5pj/ansible_ping_payload.zip/ansible/module_utils/basic.py\", line 176, in <module>\nModuleNotFoundError: No module named 'ansible.module_utils.six.moves'\n",
    "module_stdout": "",
    "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error",
    "rc": 1
}
2025-07-26 16:25:15,087 p=6264 u=root n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'ansible.module_utils.six.moves'
2025-07-26 16:25:15,090 p=6264 u=root n=ansible | web1 | FAILED! => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "module_stderr": "Traceback (most recent call last):\n  File \"<stdin>\", line 102, in <module>\n  File \"<stdin>\", line 94, in _ansiballz_main\n  File \"<stdin>\", line 37, in invoke_module\n  File \"/tmp/ansible_ping_payload_t68o0hmh/ansible_ping_payload.zip/ansible/module_utils/basic.py\", line 176, in <module>\nModuleNotFoundError: No module named 'ansible.module_utils.six.moves'\n",
    "module_stdout": "",
    "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error",
    "rc": 1
}
2025-07-26 16:25:15,280 p=6264 u=root n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'ansible.module_utils.six.moves'
2025-07-26 16:25:15,282 p=6264 u=root n=ansible | web2 | FAILED! => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "module_stderr": "Traceback (most recent call last):\n  File \"<stdin>\", line 102, in <module>\n  File \"<stdin>\", line 94, in _ansiballz_main\n  File \"<stdin>\", line 37, in invoke_module\n  File \"/tmp/ansible_ping_payload_9z3q4doh/ansible_ping_payload.zip/ansible/module_utils/basic.py\", line 176, in <module>\nModuleNotFoundError: No module named 'ansible.module_utils.six.moves'\n",
    "module_stdout": "",
    "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error",
    "rc": 1
}
2025-07-26 16:29:24,605 p=6348 u=root n=ansible | [WARNING]: Could not match supplied host pattern, ignoring: ping

2025-07-26 16:29:24,607 p=6348 u=root n=ansible | [WARNING]: No hosts matched, nothing to do

2025-07-26 16:29:24,616 p=6348 u=root n=ansible | ERROR! No argument passed to command module
2025-07-26 16:29:53,167 p=6370 u=root n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'ansible.module_utils.six.moves'
2025-07-26 16:29:53,168 p=6370 u=root n=ansible | web2 | FAILED! => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "module_stderr": "Traceback (most recent call last):\n  File \"<stdin>\", line 102, in <module>\n  File \"<stdin>\", line 94, in _ansiballz_main\n  File \"<stdin>\", line 37, in invoke_module\n  File \"/tmp/ansible_ping_payload__4e7vje1/ansible_ping_payload.zip/ansible/module_utils/basic.py\", line 176, in <module>\nModuleNotFoundError: No module named 'ansible.module_utils.six.moves'\n",
    "module_stdout": "",
    "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error",
    "rc": 1
}
2025-07-26 16:29:53,170 p=6370 u=root n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'ansible.module_utils.six.moves'
2025-07-26 16:29:53,171 p=6370 u=root n=ansible | web1 | FAILED! => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "module_stderr": "Traceback (most recent call last):\n  File \"<stdin>\", line 102, in <module>\n  File \"<stdin>\", line 94, in _ansiballz_main\n  File \"<stdin>\", line 37, in invoke_module\n  File \"/tmp/ansible_ping_payload_aluuqbwn/ansible_ping_payload.zip/ansible/module_utils/basic.py\", line 176, in <module>\nModuleNotFoundError: No module named 'ansible.module_utils.six.moves'\n",
    "module_stdout": "",
    "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error",
    "rc": 1
}
2025-07-26 16:37:28,371 p=7198 u=root n=ansible | [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2025-07-26 16:37:28,377 p=7198 u=root n=ansible | web1 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.12"
    },
    "changed": false,
    "ping": "pong"
}
2025-07-26 16:37:28,379 p=7198 u=root n=ansible | [WARNING]: Platform linux on host web2 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2025-07-26 16:37:28,379 p=7198 u=root n=ansible | web2 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.12"
    },
    "changed": false,
    "ping": "pong"
}
2025-07-26 17:50:29,788 p=7631 u=root n=ansible | ERROR! conflicting action statements: hosts, gather_facts

The error appears to be in '/root/ansibleLabX2/playbooks/install-nginx.yml': line 4, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: "INSTALACIÃ“N: Nginx y dependencias del sistema"
  ^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2025-07-26 17:51:05,265 p=7633 u=root n=ansible | [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2025-07-26 17:51:05,267 p=7633 u=root n=ansible | web1 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.12"
    },
    "changed": false,
    "ping": "pong"
}
2025-07-26 17:51:05,271 p=7633 u=root n=ansible | [WARNING]: Platform linux on host web2 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2025-07-26 17:51:05,274 p=7633 u=root n=ansible | web2 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.12"
    },
    "changed": false,
    "ping": "pong"
}
2025-07-26 17:51:37,718 p=7650 u=root n=ansible | [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2025-07-26 17:51:37,723 p=7650 u=root n=ansible | web1 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.12"
    },
    "changed": false,
    "ping": "pong"
}
2025-07-26 17:51:45,552 p=7657 u=root n=ansible | [WARNING]: Platform linux on host web2 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2025-07-26 17:51:45,554 p=7657 u=root n=ansible | web2 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.12"
    },
    "changed": false,
    "ping": "pong"
}
2025-07-26 17:51:54,145 p=7664 u=root n=ansible | {
    "_meta": {
        "hostvars": {
            "web1": {
                "admin_email": "admin@empresa.com",
                "admin_users": [
                    {
                        "comment": "Usuario DevOps",
                        "groups": "sudo",
                        "name": "devops",
                        "shell": "/bin/bash"
                    }
                ],
                "ansible_host": "52.188.81.6",
                "ansible_user": "amalaver",
                "company_name": "SFI Networks",
                "deployment_date": "{{ ansible_date_time.date }}",
                "document_root": "/var/www/html",
                "environment_name": "laboratorio",
                "firewall_enabled": true,
                "http_port": 80,
                "https_port": 443,
                "log_retention_days": 30,
                "nginx_access_log": "/var/log/nginx/access.log",
                "nginx_client_max_body_size": "10M",
                "nginx_error_log": "/var/log/nginx/error.log",
                "nginx_keepalive_timeout": 65,
                "nginx_log_level": "warn",
                "nginx_service_enabled": true,
                "nginx_service_state": "started",
                "nginx_user": "www-data",
                "nginx_version": "latest",
                "nginx_worker_connections": 1024,
                "nginx_worker_processes": 2,
                "ntp_enabled": true,
                "ntp_timezone": "{{ timezone }}",
                "server_id": 1,
                "ssh_port": 22,
                "ssl_certificate_key_path": "/etc/ssl/private/nginx.key",
                "ssl_certificate_path": "/etc/ssl/certs/nginx.crt",
                "ssl_enabled": false,
                "system_packages": [
                    "curl",
                    "wget",
                    "unzip",
                    "vim",
                    "htop",
                    "tree"
                ],
                "timezone": "America/Lima",
                "virtual_hosts": [
                    {
                        "document_root": "{{ document_root }}",
                        "index_files": "index.html index.htm",
                        "name": "default",
                        "server_name": "{{ ansible_default_ipv4.address }}"
                    },
                    {
                        "document_root": "/var/www/empresa",
                        "index_files": "index.html",
                        "name": "empresa",
                        "server_name": "empresa.local"
                    }
                ],
                "website_title": "Servidor Nginx - {{ environment_name }}"
            },
            "web2": {
                "admin_email": "admin@empresa.com",
                "admin_users": [
                    {
                        "comment": "Usuario DevOps",
                        "groups": "sudo",
                        "name": "devops",
                        "shell": "/bin/bash"
                    }
                ],
                "ansible_host": "135.237.121.243",
                "ansible_user": "amalaver",
                "company_name": "SFI Networks",
                "deployment_date": "{{ ansible_date_time.date }}",
                "document_root": "/var/www/html",
                "environment_name": "laboratorio",
                "firewall_enabled": true,
                "http_port": 80,
                "https_port": 443,
                "log_retention_days": 30,
                "nginx_access_log": "/var/log/nginx/access.log",
                "nginx_client_max_body_size": "10M",
                "nginx_error_log": "/var/log/nginx/error.log",
                "nginx_keepalive_timeout": 65,
                "nginx_log_level": "warn",
                "nginx_service_enabled": true,
                "nginx_service_state": "started",
                "nginx_user": "www-data",
                "nginx_version": "latest",
                "nginx_worker_connections": 1024,
                "nginx_worker_processes": 2,
                "ntp_enabled": true,
                "ntp_timezone": "{{ timezone }}",
                "server_id": 2,
                "ssh_port": 22,
                "ssl_certificate_key_path": "/etc/ssl/private/nginx.key",
                "ssl_certificate_path": "/etc/ssl/certs/nginx.crt",
                "ssl_enabled": false,
                "system_packages": [
                    "curl",
                    "wget",
                    "unzip",
                    "vim",
                    "htop",
                    "tree"
                ],
                "timezone": "America/Lima",
                "virtual_hosts": [
                    {
                        "document_root": "{{ document_root }}",
                        "index_files": "index.html index.htm",
                        "name": "default",
                        "server_name": "{{ ansible_default_ipv4.address }}"
                    },
                    {
                        "document_root": "/var/www/empresa",
                        "index_files": "index.html",
                        "name": "empresa",
                        "server_name": "empresa.local"
                    }
                ],
                "website_title": "Servidor Nginx - {{ environment_name }}"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "webservers",
            "testing"
        ]
    },
    "testing": {
        "hosts": [
            "web1"
        ]
    },
    "webservers": {
        "hosts": [
            "web1",
            "web2"
        ]
    }
}
2025-07-26 17:58:25,607 p=7666 u=root n=ansible | ERROR! conflicting action statements: hosts, gather_facts

The error appears to be in '/root/ansibleLabX2/playbooks/install-nginx.yml': line 4, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: "INSTALACIÃ“N: Nginx y dependencias del sistema"
  ^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2025-07-26 17:58:55,359 p=7671 u=root n=ansible | ERROR! conflicting action statements: hosts, gather_facts

The error appears to be in '/root/ansibleLabX2/playbooks/install-nginx.yml': line 4, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: "INSTALACIÃ“N: Nginx y dependencias del sistema"
  ^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2025-07-26 17:59:41,208 p=7691 u=root n=ansible | PLAY [LABORATORIO: InstalaciÃ³n y configuraciÃ³n completa de Nginx] ************************************************************************************************************************************************************************************************************
2025-07-26 17:59:41,233 p=7691 u=root n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:45,926 p=7691 u=root n=ansible | [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2025-07-26 17:59:45,927 p=7691 u=root n=ansible | ok: [web1]
2025-07-26 17:59:46,044 p=7691 u=root n=ansible | [WARNING]: Platform linux on host web2 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2025-07-26 17:59:46,045 p=7691 u=root n=ansible | ok: [web2]
2025-07-26 17:59:46,061 p=7691 u=root n=ansible | TASK [PreparaciÃ³n: Mostrar informaciÃ³n inicial] ******************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:46,128 p=7691 u=root n=ansible | ok: [web1] => {
    "msg": "=====================================\nINICIO DEL LABORATORIO NGINX\n=====================================\nHost: vamalaver01\nIP: 10.0.0.5\nSistema: Ubuntu 24.04\nEntorno: laboratorio\n=====================================\n"
}
2025-07-26 17:59:46,130 p=7691 u=root n=ansible | ok: [web2] => {
    "msg": "=====================================\nINICIO DEL LABORATORIO NGINX\n=====================================\nHost: vamalaver03\nIP: 10.0.0.7\nSistema: Ubuntu 24.04\nEntorno: laboratorio\n=====================================\n"
}
2025-07-26 17:59:46,143 p=7691 u=root n=ansible | TASK [PreparaciÃ³n: Actualizar cache de paquetes] *****************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:47,378 p=7691 u=root n=ansible | changed: [web2]
2025-07-26 17:59:47,746 p=7691 u=root n=ansible | changed: [web1]
2025-07-26 17:59:47,762 p=7691 u=root n=ansible | TASK [Debug: Verificar variables cargadas] ***********************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:47,843 p=7691 u=root n=ansible | ok: [web1] => {
    "msg": "Variables del sistema:\n- system_packages: ['curl', 'wget', 'unzip', 'vim', 'htop', 'tree']\n- environment_name: laboratorio\n- timezone: America/Lima\n"
}
2025-07-26 17:59:47,862 p=7691 u=root n=ansible | ok: [web2] => {
    "msg": "Variables del sistema:\n- system_packages: ['curl', 'wget', 'unzip', 'vim', 'htop', 'tree']\n- environment_name: laboratorio\n- timezone: America/Lima\n"
}
2025-07-26 17:59:47,880 p=7691 u=root n=ansible | TASK [Sistema: Configurar timezone] ******************************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:47,937 p=7691 u=root n=ansible | skipping: [web1]
2025-07-26 17:59:47,964 p=7691 u=root n=ansible | skipping: [web2]
2025-07-26 17:59:47,981 p=7691 u=root n=ansible | TASK [Sistema: Instalar paquetes del sistema] ********************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:48,836 p=7691 u=root n=ansible | fatal: [web2]: FAILED! => {"changed": false, "msg": "No package matching 'tree' is available"}
2025-07-26 17:59:49,947 p=7691 u=root n=ansible | Suggested packages:
  zip
The following NEW packages will be installed:
  tree unzip
0 upgraded, 2 newly installed, 0 to remove and 33 not upgraded.
2025-07-26 17:59:49,948 p=7691 u=root n=ansible | changed: [web1]
2025-07-26 17:59:49,961 p=7691 u=root n=ansible | TASK [Sistema: Crear usuario administrativo] *********************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:51,079 p=7691 u=root n=ansible | changed: [web1] => (item={'name': 'devops', 'comment': 'Usuario DevOps', 'groups': 'sudo', 'shell': '/bin/bash'})
2025-07-26 17:59:51,093 p=7691 u=root n=ansible | TASK [Nginx: Instalar nginx] *************************************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:52,083 p=7691 u=root n=ansible | ok: [web1]
2025-07-26 17:59:52,098 p=7691 u=root n=ansible | TASK [Nginx: Verificar instalaciÃ³n] ******************************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:53,023 p=7691 u=root n=ansible | skipping: [web1]
2025-07-26 17:59:53,043 p=7691 u=root n=ansible | TASK [Nginx: Mostrar versiÃ³n instalada] **************************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:53,089 p=7691 u=root n=ansible | ok: [web1] => {
    "msg": "Nginx instalado: "
}
2025-07-26 17:59:53,108 p=7691 u=root n=ansible | TASK [Sistema: Configurar logrotate bÃ¡sico] **********************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:54,125 p=7691 u=root n=ansible | ok: [web1]
2025-07-26 17:59:54,138 p=7691 u=root n=ansible | TASK [Red: Configurar UFW si estÃ¡ habilitado] ********************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:55,172 p=7691 u=root n=ansible | ok: [web1]
2025-07-26 17:59:55,190 p=7691 u=root n=ansible | TASK [VerificaciÃ³n: Estado del servicio nginx] *******************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:56,910 p=7691 u=root n=ansible | ok: [web1]
2025-07-26 17:59:56,927 p=7691 u=root n=ansible | TASK [VerificaciÃ³n: Comprobar que nginx estÃ¡ escuchando] *********************************************************************************************************************************************************************************************************************
2025-07-26 17:59:57,903 p=7691 u=root n=ansible | skipping: [web1]
2025-07-26 17:59:57,919 p=7691 u=root n=ansible | TASK [Info: Mostrar resumen de instalaciÃ³n] **********************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:57,973 p=7691 u=root n=ansible | ok: [web1] => {
    "msg": "=====================================\nINSTALACIÃ“N COMPLETADA\n=====================================\nHost: vamalaver01\nNginx Version: \nEstado: Instalado y funcionando\nPuerto: 80 activo\nPrÃ³ximo paso: ConfiguraciÃ³n\n=====================================\n"
}
2025-07-26 17:59:57,992 p=7691 u=root n=ansible | TASK [Config: Crear directorios para virtual hosts] **************************************************************************************************************************************************************************************************************************
2025-07-26 17:59:58,975 p=7691 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/sites-available"
 }


2025-07-26 17:59:58,980 p=7691 u=root n=ansible | changed: [web1] => (item=/etc/nginx/sites-available)
2025-07-26 17:59:59,603 p=7691 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/sites-enabled"
 }


2025-07-26 17:59:59,606 p=7691 u=root n=ansible | changed: [web1] => (item=/etc/nginx/sites-enabled)
2025-07-26 18:00:00,238 p=7691 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/conf.d"
 }


2025-07-26 18:00:00,241 p=7691 u=root n=ansible | changed: [web1] => (item=/etc/nginx/conf.d)
2025-07-26 18:00:00,259 p=7691 u=root n=ansible | TASK [Config: Crear directorios de documentos web] ***************************************************************************************************************************************************************************************************************************
2025-07-26 18:00:00,964 p=7691 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/var/www/html"
 }


2025-07-26 18:00:00,967 p=7691 u=root n=ansible | changed: [web1] => (item={'name': 'default', 'server_name': '10.0.0.5', 'document_root': '/var/www/html', 'index_files': 'index.html index.htm'})
2025-07-26 18:00:01,590 p=7691 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/www/empresa",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-07-26 18:00:01,591 p=7691 u=root n=ansible | changed: [web1] => (item={'name': 'empresa', 'server_name': 'empresa.local', 'document_root': '/var/www/empresa', 'index_files': 'index.html'})
2025-07-26 18:00:01,625 p=7691 u=root n=ansible | TASK [Config: Desplegar configuraciÃ³n principal de nginx] ********************************************************************************************************************************************************************************************************************
2025-07-26 18:00:02,544 p=7691 u=root n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2025-07-26 18:00:02,549 p=7691 u=root n=ansible | fatal: [web1]: FAILED! => {"changed": false, "msg": "Could not find or access 'nginx.conf.j2'\nSearched in:\n\t/root/ansibleLabX2/playbooks/templates/nginx.conf.j2\n\t/root/ansibleLabX2/playbooks/nginx.conf.j2\n\t/root/ansibleLabX2/playbooks/templates/nginx.conf.j2\n\t/root/ansibleLabX2/playbooks/nginx.conf.j2 on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2025-07-26 18:00:02,554 p=7691 u=root n=ansible | PLAY RECAP *******************************************************************************************************************************************************************************************************************************************************************
2025-07-26 18:00:02,556 p=7691 u=root n=ansible | web1                       : ok=14   changed=5    unreachable=0    failed=1    skipped=3    rescued=0    ignored=0   
2025-07-26 18:00:02,556 p=7691 u=root n=ansible | web2                       : ok=4    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2025-07-26 18:03:16,064 p=7778 u=root n=ansible | PLAY [LABORATORIO: InstalaciÃ³n y configuraciÃ³n completa de Nginx] ************************************************************************************************************************************************************************************************************
2025-07-26 18:03:16,094 p=7778 u=root n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:20,583 p=7778 u=root n=ansible | [WARNING]: Platform linux on host web2 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2025-07-26 18:03:20,585 p=7778 u=root n=ansible | ok: [web2]
2025-07-26 18:03:20,654 p=7778 u=root n=ansible | [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2025-07-26 18:03:20,654 p=7778 u=root n=ansible | ok: [web1]
2025-07-26 18:03:20,669 p=7778 u=root n=ansible | TASK [PreparaciÃ³n: Mostrar informaciÃ³n inicial] ******************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:20,719 p=7778 u=root n=ansible | ok: [web1] => {
    "msg": "=====================================\nINICIO DEL LABORATORIO NGINX\n=====================================\nHost: vamalaver01\nIP: 10.0.0.5\nSistema: Ubuntu 24.04\nEntorno: laboratorio\n=====================================\n"
}
2025-07-26 18:03:20,750 p=7778 u=root n=ansible | ok: [web2] => {
    "msg": "=====================================\nINICIO DEL LABORATORIO NGINX\n=====================================\nHost: vamalaver03\nIP: 10.0.0.7\nSistema: Ubuntu 24.04\nEntorno: laboratorio\n=====================================\n"
}
2025-07-26 18:03:20,764 p=7778 u=root n=ansible | TASK [PreparaciÃ³n: Actualizar cache de paquetes] *****************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:22,109 p=7778 u=root n=ansible | ok: [web2]
2025-07-26 18:03:22,339 p=7778 u=root n=ansible | changed: [web1]
2025-07-26 18:03:22,354 p=7778 u=root n=ansible | TASK [Debug: Verificar variables cargadas] ***********************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:22,411 p=7778 u=root n=ansible | ok: [web1] => {
    "msg": "Variables del sistema:\n- system_packages: ['curl', 'wget', 'unzip', 'vim', 'htop', 'tree']\n- environment_name: laboratorio\n- timezone: America/Lima\n"
}
2025-07-26 18:03:22,446 p=7778 u=root n=ansible | ok: [web2] => {
    "msg": "Variables del sistema:\n- system_packages: ['curl', 'wget', 'unzip', 'vim', 'htop', 'tree']\n- environment_name: laboratorio\n- timezone: America/Lima\n"
}
2025-07-26 18:03:22,464 p=7778 u=root n=ansible | TASK [Sistema: Configurar timezone] ******************************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:22,539 p=7778 u=root n=ansible | skipping: [web1]
2025-07-26 18:03:22,542 p=7778 u=root n=ansible | skipping: [web2]
2025-07-26 18:03:22,562 p=7778 u=root n=ansible | TASK [Sistema: Instalar paquetes del sistema] ********************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:24,442 p=7778 u=root n=ansible | Suggested packages:
  zip
The following NEW packages will be installed:
  unzip
0 upgraded, 1 newly installed, 0 to remove and 36 not upgraded.
2025-07-26 18:03:24,445 p=7778 u=root n=ansible | changed: [web2]
2025-07-26 18:03:24,510 p=7778 u=root n=ansible | Suggested packages:
  zip
The following NEW packages will be installed:
  tree unzip
0 upgraded, 2 newly installed, 0 to remove and 33 not upgraded.
2025-07-26 18:03:24,511 p=7778 u=root n=ansible | changed: [web1]
2025-07-26 18:03:24,528 p=7778 u=root n=ansible | TASK [Sistema: Crear usuario administrativo] *********************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:25,629 p=7778 u=root n=ansible | changed: [web1] => (item={'name': 'devops', 'comment': 'Usuario DevOps', 'groups': 'sudo', 'shell': '/bin/bash'})
2025-07-26 18:03:25,647 p=7778 u=root n=ansible | changed: [web2] => (item={'name': 'devops', 'comment': 'Usuario DevOps', 'groups': 'sudo', 'shell': '/bin/bash'})
2025-07-26 18:03:25,669 p=7778 u=root n=ansible | TASK [Nginx: Instalar nginx] *************************************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:26,691 p=7778 u=root n=ansible | ok: [web1]
2025-07-26 18:03:27,582 p=7778 u=root n=ansible | The following additional packages will be installed:
  nginx-common
Suggested packages:
  fcgiwrap nginx-doc ssl-cert
The following NEW packages will be installed:
  nginx nginx-common
0 upgraded, 2 newly installed, 0 to remove and 36 not upgraded.
2025-07-26 18:03:27,585 p=7778 u=root n=ansible | changed: [web2]
2025-07-26 18:03:27,604 p=7778 u=root n=ansible | TASK [Nginx: Verificar instalaciÃ³n] ******************************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:28,492 p=7778 u=root n=ansible | skipping: [web1]
2025-07-26 18:03:28,514 p=7778 u=root n=ansible | skipping: [web2]
2025-07-26 18:03:28,534 p=7778 u=root n=ansible | TASK [Nginx: Mostrar versiÃ³n instalada] **************************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:28,588 p=7778 u=root n=ansible | ok: [web1] => {
    "msg": "Nginx instalado: "
}
2025-07-26 18:03:28,625 p=7778 u=root n=ansible | ok: [web2] => {
    "msg": "Nginx instalado: "
}
2025-07-26 18:03:28,645 p=7778 u=root n=ansible | TASK [Sistema: Configurar logrotate bÃ¡sico] **********************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:29,645 p=7778 u=root n=ansible | ok: [web1]
2025-07-26 18:03:29,663 p=7778 u=root n=ansible | ok: [web2]
2025-07-26 18:03:29,680 p=7778 u=root n=ansible | TASK [Red: Configurar UFW si estÃ¡ habilitado] ********************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:30,745 p=7778 u=root n=ansible | ok: [web1]
2025-07-26 18:03:30,748 p=7778 u=root n=ansible | ok: [web2]
2025-07-26 18:03:30,767 p=7778 u=root n=ansible | TASK [VerificaciÃ³n: Estado del servicio nginx] *******************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:32,183 p=7778 u=root n=ansible | fatal: [web2]: FAILED! => {"changed": false, "msg": "Could not find the requested service nginx: host"}
2025-07-26 18:03:32,212 p=7778 u=root n=ansible | ok: [web1]
2025-07-26 18:03:32,236 p=7778 u=root n=ansible | TASK [VerificaciÃ³n: Comprobar que nginx estÃ¡ escuchando] *********************************************************************************************************************************************************************************************************************
2025-07-26 18:03:33,137 p=7778 u=root n=ansible | skipping: [web1]
2025-07-26 18:03:33,207 p=7778 u=root n=ansible | TASK [Info: Mostrar resumen de instalaciÃ³n] **********************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:33,268 p=7778 u=root n=ansible | ok: [web1] => {
    "msg": "=====================================\nINSTALACIÃ“N COMPLETADA\n=====================================\nHost: vamalaver01\nNginx Version: \nEstado: Instalado y funcionando\nPuerto: 80 activo\nPrÃ³ximo paso: ConfiguraciÃ³n\n=====================================\n"
}
2025-07-26 18:03:33,288 p=7778 u=root n=ansible | TASK [Config: Crear directorios para virtual hosts] **************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:34,199 p=7778 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/sites-available"
 }


2025-07-26 18:03:34,202 p=7778 u=root n=ansible | changed: [web1] => (item=/etc/nginx/sites-available)
2025-07-26 18:03:34,826 p=7778 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/sites-enabled"
 }


2025-07-26 18:03:34,828 p=7778 u=root n=ansible | changed: [web1] => (item=/etc/nginx/sites-enabled)
2025-07-26 18:03:35,446 p=7778 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/conf.d"
 }


2025-07-26 18:03:35,450 p=7778 u=root n=ansible | changed: [web1] => (item=/etc/nginx/conf.d)
2025-07-26 18:03:35,482 p=7778 u=root n=ansible | TASK [Config: Crear directorios de documentos web] ***************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:36,187 p=7778 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/var/www/html"
 }


2025-07-26 18:03:36,191 p=7778 u=root n=ansible | changed: [web1] => (item={'name': 'default', 'server_name': '10.0.0.5', 'document_root': '/var/www/html', 'index_files': 'index.html index.htm'})
2025-07-26 18:03:36,819 p=7778 u=root n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/www/empresa",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-07-26 18:03:36,822 p=7778 u=root n=ansible | changed: [web1] => (item={'name': 'empresa', 'server_name': 'empresa.local', 'document_root': '/var/www/empresa', 'index_files': 'index.html'})
2025-07-26 18:03:36,843 p=7778 u=root n=ansible | TASK [Config: Desplegar configuraciÃ³n principal de nginx] ********************************************************************************************************************************************************************************************************************
2025-07-26 18:03:37,771 p=7778 u=root n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2025-07-26 18:03:37,772 p=7778 u=root n=ansible | fatal: [web1]: FAILED! => {"changed": false, "msg": "Could not find or access 'nginx.conf.j2'\nSearched in:\n\t/root/ansibleLabX2/playbooks/templates/nginx.conf.j2\n\t/root/ansibleLabX2/playbooks/nginx.conf.j2\n\t/root/ansibleLabX2/playbooks/templates/nginx.conf.j2\n\t/root/ansibleLabX2/playbooks/nginx.conf.j2 on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2025-07-26 18:03:37,776 p=7778 u=root n=ansible | PLAY RECAP *******************************************************************************************************************************************************************************************************************************************************************
2025-07-26 18:03:37,776 p=7778 u=root n=ansible | web1                       : ok=14   changed=5    unreachable=0    failed=1    skipped=3    rescued=0    ignored=0   
2025-07-26 18:03:37,777 p=7778 u=root n=ansible | web2                       : ok=10   changed=3    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
